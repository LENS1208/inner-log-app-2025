# Basic認証の設定方法

このアプリケーションにBasic認証を追加しました。

## Vercelでの設定手順

### 1. 環境変数の設定

Vercelのプロジェクト設定で以下の環境変数を追加してください：

1. Vercelダッシュボードにアクセス
2. プロジェクトを選択
3. **Settings** → **Environment Variables** に移動
4. 以下の2つの環境変数を追加：

```
BASIC_AUTH_USER=your_username
BASIC_AUTH_PASSWORD=your_secure_password
```

**重要**:
- デフォルトのユーザー名は `admin`、パスワードは `innerlog2025` です
- 本番環境では必ず独自の強固なパスワードに変更してください
- パスワードは英数字と記号を組み合わせた12文字以上を推奨

### 2. デプロイ

環境変数を設定後、以下のいずれかの方法でデプロイします：

#### 方法A: Gitプッシュでデプロイ
```bash
git add .
git commit -m "Add basic authentication"
git push
```

#### 方法B: Vercel CLIでデプロイ
```bash
vercel --prod
```

### 3. 動作確認

1. https://www.inner-log.com/ にアクセス
2. Basic認証のダイアログが表示されます
3. 設定したユーザー名とパスワードを入力
4. 正常にログインできることを確認

## ファイル構成

- `middleware.js` - Basic認証を実装するEdge Function
- `vercel.json` - Vercelの設定ファイル
- `.env.example` - 環境変数のサンプル

## トラブルシューティング

### 認証ダイアログが表示されない
- Vercelで環境変数が正しく設定されているか確認
- デプロイが完了しているか確認
- ブラウザのキャッシュをクリアして再試行

### 認証に失敗する
- ユーザー名とパスワードが正しいか確認
- 環境変数の値にスペースや改行が含まれていないか確認
- Vercelの環境変数設定画面で値を再確認

### 認証をスキップしたい（開発環境のみ）
ローカル開発環境では認証はスキップされます。`npm run dev` で起動すればBasic認証なしでアクセスできます。

## セキュリティ注意事項

1. **強固なパスワードを使用**: 推測されにくい複雑なパスワードを設定してください
2. **定期的な変更**: パスワードは定期的に変更することを推奨します
3. **環境変数の管理**: 環境変数は絶対にGitにコミットしないでください
4. **HTTPSの使用**: Vercelは自動的にHTTPSを提供しますが、カスタムドメインでも必ずHTTPSを使用してください
