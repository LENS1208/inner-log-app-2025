<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>FXåˆ†æãƒ„ãƒ¼ãƒ«</title>
<style>
html,body,#root{height:100%;margin:0}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
</style>
<script>
// Basic Authentication (only on production)
(function() {
  const isProduction = window.location.hostname === 'inner-log.com' ||
                       window.location.hostname.endsWith('.vercel.app');

  if (!isProduction) return;

  const SESSION_KEY = 'auth_session';
  const VALID_PASSWORD = 'log2025';

  const isAuthenticated = sessionStorage.getItem(SESSION_KEY) === 'true';

  if (!isAuthenticated) {
    const password = prompt('ã“ã®ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™:');

    if (password === VALID_PASSWORD) {
      sessionStorage.setItem(SESSION_KEY, 'true');
    } else {
      alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
      document.body.innerHTML = '<h1>èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ</h1>';
      return;
    }
  }
})();

// Clear all caches on load
(async function() {
  try {
    // Clear IndexedDB
    if (window.indexedDB) {
      const dbs = await window.indexedDB.databases();
      dbs.forEach(db => {
        if (db.name) window.indexedDB.deleteDatabase(db.name);
      });
    }

    // Clear Service Workers
    if ('serviceWorker' in navigator) {
      const registrations = await navigator.serviceWorker.getRegistrations();
      for (let registration of registrations) {
        await registration.unregister();
      }
    }

    // Clear Cache Storage
    if ('caches' in window) {
      const cacheNames = await caches.keys();
      await Promise.all(cacheNames.map(name => caches.delete(name)));
    }

    console.log('ğŸ§¹ All caches cleared successfully');
  } catch (e) {
    console.warn('Cache clear failed:', e);
  }
})();
</script>
</head>
<body>
<div id="root"></div>
<script type="module" src="/src/main.tsx"></script>
</body>
</html>