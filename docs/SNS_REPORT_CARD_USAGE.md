# SNS投稿用 日次レポートカード生成機能

## 概要

インナーログのUIデザインを踏襲した、SNS投稿用の日次レポートカードを生成する機能です。
900×1200px（3:4）のPNG画像を2枚生成できます。

## アクセス方法

サイドメニューから「SNS投稿カード」をクリック、または以下のURLにアクセス：
```
#/daily-report-card
```

## 生成されるカード

### カード1: 日次数字カード
- ヘッダー: Today's FX Result + 日付
- メイン損益値（大きく表示）
  - 円のみ
  - pipsのみ
  - 両方表示（選択可能）
- 4つのミニKPI（2×2グリッド）
  - 勝率（勝敗分の内訳付き）
  - PF（プロフィットファクター）
  - 最大DD（ドローダウン）
  - 取引回数
- フッター: ユーザー名（オプション）+ FX会社名リンク（オプション）

### カード2: 日次チャートカード
- ヘッダー: Today's Trading Activity + 日付
- メインチャート: 当日の損益推移（Line Chart）
  - インナーログのエクイティカーブと同じ青グラデーションスタイル
- 2つのミニチャート（横並び）
  - 通貨ペア別損益（上位5つ）
  - 時間帯別損益（東京・ロンドン・NY）
- フッター: ユーザー名（オプション）+ FX会社名リンク（オプション）

## 使い方

### 1. 設定を調整

#### 日付を選択
- ドロップダウンから対象の日付を選択
- デフォルトは最新の取引日

#### 損益表示モード
- **円のみ**: メイン損益値を円で表示
- **pipsのみ**: メイン損益値をpipsで表示
- **両方表示**: 円とpipsの両方を表示

#### FX会社名
- カード右下に表示するFX会社名（例: XM, TITAN）
- 空欄の場合は表示されません

#### ユーザー名
- カード左下に表示するTwitter等のユーザー名
- 例: trader123 → @trader123として表示

#### チェックボックス
- **ユーザー名を表示**: 入力したユーザー名をカードに表示
- **FX会社名を表示**: 入力したFX会社名をカードに表示（リンク風の下線付き）

### 2. カードをダウンロード

3つのボタンから選択：
- **カード1をダウンロード**: 日次数字カードのみ
- **カード2をダウンロード**: 日次チャートカードのみ
- **両方をダウンロード**: 両方のカードを順次ダウンロード

ダウンロードされるファイル名：
- `daily-report-card-1_2025-12-02.png`
- `daily-report-card-2_2025-12-02.png`

## デザインの特徴

### 色調
インナーログのライトモードから抽出した色を使用：
- **メインブルー**: `#0084c7`（利益、アクセント）
- **レッド**: `#ef4444`（損失、DD）
- **背景**: `#fafbfc`（淡いグレー）
- **サーフェス**: `#ffffff`（カード背景）
- **ミュート**: `#64748b`（ラベル文字）

### スタイル
- カード角丸: 8px
- 影なし（フラットデザイン）
- 清潔感のある余白感
- モダンなサンセリフフォント
- 数値は視認性重視の大きめサイズ

### チャート
- エクイティカーブ: 青グラデーション（既存UIと同じ）
- スムーズな曲線（tension: 0.4）
- プラス/マイナスで色分け（青/赤）

## データソース

- 現在選択中のデータセット（A/B/C または データベース）から自動取得
- フィルター設定が適用されます

## 技術仕様

- **サイズ**: 900×1200px（3:4）
- **解像度**: 2x（高解像度PNG）
- **フォーマット**: PNG
- **ライブラリ**:
  - `html2canvas`: DOMからPNG生成
  - `react-chartjs-2`: チャート描画
  - `chart.js`: チャートエンジン

## 注意事項

1. **ブラウザ互換性**: モダンブラウザ（Chrome, Firefox, Safari, Edge）推奨
2. **パフォーマンス**: 大量のトレードデータがある場合、生成に数秒かかることがあります
3. **プライバシー**: ユーザー名とFX会社名は任意入力です。SNS投稿時は個人情報にご注意ください

## カスタマイズ例

変数として以下のデータを渡せます：

```typescript
interface DailyReportData {
  date: string;                    // '2025/12/2'
  profitMode: 'yen' | 'pips' | 'both';
  mainProfitValue: {
    yen: number;                   // 15000
    pips: number;                  // 45.3
  };
  winRate: number;                 // 0.67 (67%)
  pf: number;                      // 2.5
  maxDD: number;                   // 5000
  tradeCount: number;              // 12
  wins: number;                    // 8
  losses: number;                  // 4
  draws: number;                   // 0
  sessionProfitData: Array<{
    session: string;               // '東京', 'ロンドン', 'NY'
    profit: number;
  }>;
  pairProfitData: Array<{
    pair: string;                  // 'USDJPY', 'EURUSD'
    profit: number;
  }>;
  equityData: Array<{
    time: string;                  // '09:30'
    equity: number;                // 累積損益
  }>;
  showUsername: boolean;
  username?: string;               // 'trader123'
  brokerName?: string;             // 'XM'
  showBrokerLink: boolean;
}
```

## トラブルシューティング

### ダウンロードされない
- ブラウザのポップアップブロッカーを確認
- ダウンロード設定を確認

### 画像が真っ白
- データが正しく読み込まれているか確認
- ブラウザのコンソールでエラーを確認

### チャートが表示されない
- 選択した日付にトレードデータが存在するか確認
- Chart.jsの読み込みを確認

## 今後の拡張可能性

- 週次/月次レポートカード
- カスタムテーマ（ダークモード対応）
- カード3: 戦略別分析
- カード4: AI評価スコア
- 直接SNS投稿機能
- テンプレートの追加
